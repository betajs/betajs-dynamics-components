<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="../../node_modules/betajs-scoped/dist/scoped.js"></script>
    <script src="../../node_modules/betajs/dist/beta-noscoped.js"></script>
    <script src="../../node_modules/betajs-browser/dist/betajs-browser-noscoped.js"></script>
    <script src="../../node_modules/betajs-ui/dist/betajs-ui-noscoped.js"></script>
    <script src="../../node_modules/betajs-dynamics/dist/betajs-dynamics-noscoped.js"></script>
    <script src="../../dist/betajs-dynamics-components-noscoped.js"></script>
    <link rel="stylesheet" href="../../dist/betajs-dynamics-components.css">
</head>
<body>

<div id="test">
    <h1>Tests for List</h1>

    <h3>Test Dynamics</h3>
    <div id="dynamicsworking">{{test_dynamics}}</div>

    <h3>Basic Test</h3>
    <ba-list
            id="test_list"
            ba-data:id="test_list"
    ></ba-list>


</div>

<script>
    var root = $("#test");

    var dynamic = new BetaJS.Dynamics.Dynamic({
        element: root,
        attrs : {
            test_dynamics: "Dynamics Working?"
        }
    });

    dynamic.activate();

    function test() {

        //0. Dynamics working?
        QUnit.equal(dynamic.get("test_dynamics"), $('#dynamicsworking').html().trim());

        //1. Test List Length & Content
        var listdynamic = dynamic.scope('>[id="test_list"]');
        var domlist = $('#test_list').find('list');
        var length = listdynamic.get('listcollection').count();
        QUnit.equal(length, domlist.children().length);
        QUnit.equal(listdynamic.get('listcollection').getByIndex(length-1).get('value'), domlist.find(':last').html().trim());

    }

</script>

</body>
</html>